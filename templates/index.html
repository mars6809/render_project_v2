<!DOCTYPE html>
<html>
<head>
    <title>策略管理介面</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="container mt-4">
    <h1>📈 量化交易策略管理</h1>
    <hr>

    <h2>目前啟用策略：{{ current_strategy }}</h2>
    <form method="POST">
        <select name="strategy_name" class="form-select mb-3">
            <optgroup label="AI推薦策略">
                {% for s in strategies.ai_generated %}
                <option value="{{ s.name }}" {% if s.name == current_strategy %}selected{% endif %}>
                    {{ s.name }} (勝率: {{ s.win_rate }}%)
                </option>
                {% endfor %}
            </optgroup>
            <optgroup label="自選策略">
                {% for s in strategies.user_defined %}
                <option value="{{ s.name }}" {% if s.name == current_strategy %}selected{% endif %}>
                    {{ s.name }} (勝率: {{ s.win_rate }}%)
                </option>
                {% endfor %}
            </optgroup>
        </select>
        <button type="submit" class="btn btn-primary">切換策略</button>
    </form>

    <hr>
    <h3>🏅 AI自動選出的最佳策略</h3>
    {{ table_best | safe }}

    <h3>📋 所有回測參數組</h3>
    {{ table_all | safe }}
</body>
</html>
